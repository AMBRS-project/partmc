
Check for memory leaks with valgrind.

Test partmc -p.

Update comments at top of files.

How should we be calling aerosol_optical? Every timestep, or only on
processing? At least remove DEBUGs from mosaic.f90.

Fix the handling of comp_vol in aero_dist_sample() and
aero_state_sample().

Fix "make dist".

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

Change error messages in inout.f90 to use die_msg().

We shouldn't really need both aero_binned_t and aero_dist_t. Actually
aero_dist_t should go away, so that we can generate exact samplings
for particle-based methods.

Change Makefile to not use FFLAGS as the thing to set, but rather use
DEF_FFLAGS or something, and include FFLAGS without settting it. Also
print out all settings before starting compilation.

Change gas conc from ppb to mole proportion.

Get a better bessel function so that we can compute the exact golovin
solution for larger arguments.

Add implicit, adaptive timestepping for the condensation ODE solver.

Implement a better poisson distribution generator. We should probably
generate a poisson sample per-bin, rather than doing a total sample
and then using a slow sampling to pick samples one-by-one.

Add separate del_t for mosaic, coag, and cond. Check on input that
t_output, etc are multiples of del_t so that the n_time header
information is actually correct.

aero_binned is really storing #/dln(m)/m^3 or something?

Pass full particle data to the kernel_*() functions so that we can do
proper density-dependent brownian kernels. Requires a separate
max_kernel_*() function for each one.

Use mpi_sizeof() to get the sizes for reals, logicals, etc. There are
also functions called MPI_Sizeof1DR8 for a 1D array of real*8,
etc. What about 2D arrays, is it correct to treat them as 1D as we do
at present with mpi_pack?

Change gas mixing to be by diffusion, rather than allreduce, also env.

Add env%day_of_year (days since jan 1) and env%time_of_day (secs since
midnight) and shift info on start day, start time, etc to
env_data. Change mosaic_timestep() to just read time/day info out of
env directly. Update this info in env_data_update_state().

Allow times to be input as 1d, 34m, etc. No unit implies seconds.

Add H2O as a gas species and just track it as a regular gas, getting
rid of relative humidity in env. add a relative_humidity(env,
gas_data, gas_state) function.

Memory allocation policy should be that all functions must be called
with an already allocated structure. That is, always call type_alloc()
before calling anything else. The functions will call type_free() if
they need to before writing new data, or will take care of
(de)allocation internally. Currently at least the spec_read functions
don't free before setting new values and should be fixed.

Fix local variable sections to always be all integers, then all reals,
etc, with only one "integer ::" and then & for the rest of the lines.

Change spec_read_aero_data to spec_read_aero_data_filename and pass in
the name, and similar spec_read_*.

Add allow_halve to control that separately.

Add parameter to composition processing for type: vol, mass or mole.

Use switch/case rather than elseif chains.

Fix calling convention for aerosol_optical from mosaic.f90. Do we do
it every timestep, or just when needed, or what? What about
coagulation? Does this come in the right order?

Change aero_dists to actually store the distribution parameters,
rather than generating the discretized version immediately. This will
allow us to sample log-normal and others exactly.

Maybe generate initial number of particles from a Poisson
distribution, rather than just using the mean as we do now?

Use doxygen to generate docs. Fortran supported as of version 1.5.4.

Fix MPI so it works again.

Change state files to be in NetCDF format.
